<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="app.check_feedbacks_limits">true</parameter>

        <parameter key="app.feedbacks_contact_options" type="collection">
            <parameter key="website">%app.site_base_url%</parameter>
            <parameter key="telegram">https://t.me/wild_s7</parameter>
            <parameter key="instagram">https://www.instagram.com/wild.snowgirl/</parameter>
            <parameter key="github">https://github.com/oleksandr-andrushchenko</parameter>
            <parameter key="linkedin">https://www.linkedin.com/in/oleksandr-andrushchenko-26ab3078/</parameter>
        </parameter>

        <parameter key="app.feedback_create_command_options" type="collection">
            <parameter key="limits" type="collection">
                <parameter key="day">10</parameter>
                <parameter key="month">200</parameter>
                <parameter key="year">500</parameter>
            </parameter>
        </parameter>

        <parameter key="app.feedback_search_command_options" type="collection">
            <parameter key="limits" type="collection">
                <parameter key="day">5</parameter>
                <parameter key="month">50</parameter>
                <parameter key="year">300</parameter>
            </parameter>
        </parameter>

        <parameter key="app.feedback_lookup_command_options" type="collection">
            <parameter key="limits" type="collection">
                <parameter key="day">1</parameter>
                <parameter key="month">30</parameter>
                <parameter key="year">120</parameter>
            </parameter>
        </parameter>

        <parameter key="app.feedback_subscription_plans" type="collection">
            <parameter key="one_month" type="collection">
                <parameter key="duration">+1 month</parameter>
                <parameter key="default_price">9.99</parameter>
            </parameter>
            <parameter key="six_months" type="collection">
                <parameter key="duration">+6 months</parameter>
                <parameter key="default_price">29.99</parameter>
            </parameter>
            <parameter key="one_year" type="collection">
                <parameter key="duration">+1 year</parameter>
                <parameter key="default_price">39.99</parameter>
            </parameter>
        </parameter>

        <parameter key="app.create.search_term_type_step">true</parameter>
        <parameter key="app.create.extra_search_term_step">true</parameter>
        <parameter key="app.create.description_step">true</parameter>
        <parameter key="app.create.confirm_step">true</parameter>
        <parameter key="app.create.send_to_channel_confirm_step">true</parameter>

        <parameter key="app.search.search_term_type_step">true</parameter>
        <parameter key="app.search.confirm_step">true</parameter>

        <parameter key="app.lookup.search_term_type_step">true</parameter>
        <parameter key="app.lookup.confirm_step">true</parameter>
    </parameters>

    <services>
        <service id="app.feedback_repository" class="App\Repository\Feedback\FeedbackRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_search_repository" class="App\Repository\Feedback\FeedbackSearchRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_lookup_repository" class="App\Repository\Feedback\FeedbackLookupRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_user_subscription_repository"
                 class="App\Repository\Feedback\FeedbackUserSubscriptionRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_search_term_repository" class="App\Repository\Feedback\FeedbackSearchTermRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_search_term_user_telegram_notification_repository"
                 class="App\Repository\Feedback\FeedbackSearchTermUserTelegramNotificationRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_search_user_telegram_notification_repository"
                 class="App\Repository\Feedback\FeedbackSearchUserTelegramNotificationRepository">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="app.feedback_search_term_validator" class="App\Validator\Feedback\SearchTermTransferValidator"
                 lazy="true">
            <argument type="service" id="app.validator_helper"/>
            <tag name="validator.constraint_validator" alias="app.feedback_search_term_validator"/>
        </service>
        <service id="app.feedback_create_validator"
                 class="App\Validator\Feedback\Telegram\Bot\CreateFeedbackTelegramBotConversationStateValidator"
                 lazy="true">
            <argument type="service" id="app.validator_helper"/>
            <tag name="validator.constraint_validator" alias="app.feedback_create_validator"/>
        </service>
        <service id="app.feedback_search_validator"
                 class="App\Validator\Feedback\Telegram\Bot\SearchFeedbackTelegramBotConversationStateValidator"
                 lazy="true">
            <argument type="service" id="app.validator_helper"/>
            <tag name="validator.constraint_validator" alias="app.feedback_search_validator"/>
        </service>
        <service id="app.feedback_lookup_validator"
                 class="App\Validator\Feedback\Telegram\Bot\LookupFeedbackTelegramBotConversationStateValidator"
                 lazy="true">
            <argument type="service" id="app.validator_helper"/>
            <tag name="validator.constraint_validator" alias="app.feedback_lookup_validator"/>
        </service>
        <service id="app.feedback_search_term_transfer_normalizer"
                 class="App\Serializer\Feedback\SearchTermTransferNormalizer"
                 lazy="true">
            <argument type="service" id="app.messenger_user_transfer_normalizer"/>
            <argument type="service" id="app.messenger_user_transfer_normalizer"/>
            <tag name="serializer.normalizer" priority="-988"/>
        </service>
        <service id="app.feedback_subscription_plan_normalizer"
                 class="App\Serializer\Feedback\FeedbackSubscriptionPlanNormalizer" lazy="true">
            <tag name="serializer.normalizer" priority="-987"/>
        </service>
        <service id="app.feedback_normalizer" class="App\Serializer\Feedback\FeedbackNormalizer" lazy="true">
            <tag name="serializer.normalizer" priority="-986"/>
        </service>
        <service id="app.feedback_search_normalizer" class="App\Serializer\Feedback\FeedbackSearchNormalizer"
                 lazy="true">
            <tag name="serializer.normalizer" priority="-985"/>
        </service>
        <service id="app.feedback_lookup_normalizer" class="App\Serializer\Feedback\FeedbackLookupNormalizer"
                 lazy="true">
            <tag name="serializer.normalizer" priority="-984"/>
        </service>
        <service id="app.feedback_user_subscription_normalizer"
                 class="App\Serializer\Feedback\FeedbackUserSubscriptionNormalizer" lazy="true">
            <tag name="serializer.normalizer" priority="-983"/>
        </service>
        <service id="app.telegram_bot_conversation_state_search_feedback_normalizer"
                 class="App\Serializer\Feedback\Telegram\Bot\SearchFeedbackTelegramBotConversationStateNormalizer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.feedback_search_term_transfer_normalizer"/>
            <argument type="service" id="app.feedback_search_term_transfer_normalizer"/>
            <tag name="serializer.normalizer" priority="-969"/>
        </service>
        <service id="app.telegram_bot_conversation_state_lookup_normalizer"
                 class="App\Serializer\Feedback\Telegram\Bot\LookupFeedbackTelegramBotConversationStateNormalizer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_conversation_state_search_feedback_normalizer"/>
            <argument type="service" id="app.telegram_bot_conversation_state_search_feedback_normalizer"/>
            <tag name="serializer.normalizer" priority="-968"/>
        </service>
        <service id="app.telegram_bot_conversation_state_create_feedback_normalizer"
                 class="App\Serializer\Feedback\Telegram\Bot\CreateFeedbackTelegramBotConversationStateNormalizer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.feedback_search_term_transfer_normalizer"/>
            <argument type="service" id="app.feedback_search_term_transfer_normalizer"/>
            <tag name="serializer.normalizer" priority="-967"/>
        </service>
        <service id="app.telegram_bot_conversation_state_subscribe_normalizer"
                 class="App\Serializer\Feedback\Telegram\Bot\SubscribeTelegramBotConversationStateNormalizer"
                 lazy="true">
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.telegram_bot_conversation_state_normalizer"/>
            <argument type="service" id="app.feedback_subscription_plan_normalizer"/>
            <argument type="service" id="app.feedback_subscription_plan_normalizer"/>
            <argument type="service" id="app.telegram_bot_payment_method_repository"/>
            <argument type="service" id="app.intl_currency_provider"/>
            <tag name="serializer.normalizer" priority="-966"/>
        </service>
        <service id="app.feedback_search_term_user_telegram_notification_normalizer"
                 class="App\Serializer\Feedback\FeedbackSearchTermUserTelegramNotificationNormalizer" lazy="true">
            <tag name="serializer.normalizer" priority="-965"/>
        </service>
        <service id="app.feedback_search_user_telegram_notification_normalizer"
                 class="App\Serializer\Feedback\FeedbackSearchUserTelegramNotificationNormalizer" lazy="true">
            <tag name="serializer.normalizer" priority="-964"/>
        </service>
        <service id="app.feedback_command_options_factory"
                 class="App\Service\Feedback\Command\FeedbackCommandOptionsFactory" lazy="true"/>
        <service id="app.feedback_user_statistic_provider_registry"
                 class="App\Service\Feedback\Statistic\FeedbackUserStatisticProviderRegistry" lazy="true">
            <argument type="tagged_locator" tag="app.feedback_user_statistic_provider"/>
        </service>
        <service id="app.feedback_command_limits_checker"
                 class="App\Service\Feedback\Command\FeedbackCommandLimitsChecker" lazy="true">
            <argument>%app.check_feedbacks_limits%</argument>
        </service>
        <service id="app.feedback_telegram_reply_sign_view_provider"
                 class="App\Service\Feedback\Telegram\Bot\View\FeedbackTelegramReplySignViewProvider" lazy="true">
            <argument type="service" id="app.telegram_channel_repository"/>
            <argument type="service" id="app.messenger_user_profile_url_provider"/>
            <argument type="service" id="translator"/>
        </service>
        <service id="app.feedback_creator" class="App\Service\Feedback\FeedbackCreator" lazy="true">
            <argument type="service" id="app.feedback_create_command_options"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_statistic_provider"/>
            <argument type="service" id="app.feedback_command_limits_checker"/>
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.feedback_search_term_upserter"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="app.event_bus"/>
            <argument type="service" id="app.feedback_search_term_messenger_provider"/>
        </service>
        <service id="app.feedback_search_creator" class="App\Service\Feedback\FeedbackSearchCreator" lazy="true">
            <argument type="service" id="app.feedback_search_command_options"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_search_statistic_provider"/>
            <argument type="service" id="app.feedback_command_limits_checker"/>
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.feedback_search_term_upserter"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="app.event_bus"/>
        </service>
        <service id="app.feedback_lookup_creator" class="App\Service\Feedback\FeedbackLookupCreator"
                 lazy="true">
            <argument type="service" id="app.feedback_lookup_command_options"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_lookup_statistic_provider"/>
            <argument type="service" id="app.feedback_command_limits_checker"/>
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.feedback_search_term_upserter"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="app.event_bus"/>
        </service>
        <service id="app.feedback_searcher" class="App\Service\Feedback\FeedbackSearcher" lazy="true">
            <argument type="service" id="app.feedback_repository"/>
        </service>
        <service id="app.feedback_search_searcher" class="App\Service\Feedback\FeedbackSearchSearcher" lazy="true">
            <argument type="service" id="app.feedback_search_repository"/>
        </service>

        <service id="app.feedback_search_term_parser_instagram"
                 class="App\Service\Feedback\SearchTerm\InstagramSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_facebook"
                 class="App\Service\Feedback\SearchTerm\FacebookSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_telegram"
                 class="App\Service\Feedback\SearchTerm\TelegramSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_twitter"
                 class="App\Service\Feedback\SearchTerm\TwitterSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_tiktok"
                 class="App\Service\Feedback\SearchTerm\TiktokSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_youtube"
                 class="App\Service\Feedback\SearchTerm\YoutubeSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_onlyfans"
                 class="App\Service\Feedback\SearchTerm\OnlyfansSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_reddit"
                 class="App\Service\Feedback\SearchTerm\RedditSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_email"
                 class="App\Service\Feedback\SearchTerm\EmailSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_name"
                 class="App\Service\Feedback\SearchTerm\NameSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_parser_phone_number"
                 class="App\Service\Feedback\SearchTerm\PhoneNumberSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_unknown_messenger"
                 class="App\Service\Feedback\SearchTerm\UnknownMessengerSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_url"
                 class="App\Service\Feedback\SearchTerm\UrlSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_vkontakte"
                 class="App\Service\Feedback\SearchTerm\VkontakteSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_car_number"
                 class="App\Service\Feedback\SearchTerm\CarNumberSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_tax_number"
                 class="App\Service\Feedback\SearchTerm\TaxNumberSearchTermParser" lazy="true">
            <tag name="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser_registry"
                 class="App\Service\Feedback\SearchTerm\SearchTermParserRegistry" lazy="true">
            <argument type="tagged_locator" tag="app.feedback_search_term_parser"/>
        </service>
        <service id="app.feedback_search_term_parser" class="App\Service\Feedback\SearchTerm\SearchTermParser"
                 lazy="true">
            <argument type="service" id="app.feedback_search_term_parser_registry"/>
        </service>
        <service id="app.feedback_subscription_plan_provider"
                 class="App\Service\Feedback\Subscription\FeedbackSubscriptionPlanProvider" lazy="true">
            <argument>%app.feedback_subscription_plans%</argument>
            <argument type="service" id="translator"/>
        </service>
        <service id="app.feedback_statistic_provider"
                 class="App\Service\Feedback\Statistic\FeedbackUserStatisticProvider"
                 lazy="true">
            <argument type="service" id="app.feedback_create_command_options"/>
            <argument type="service" id="app.feedback_repository"/>
            <tag name="app.feedback_user_statistic_provider"/>
        </service>
        <service id="app.feedback_subscription_manager"
                 class="App\Service\Feedback\Subscription\FeedbackSubscriptionManager" lazy="true">
            <argument type="service" id="app.feedback_subscription_plan_provider"/>
            <argument type="service" id="app.feedback_user_subscription_repository"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="app.event_bus"/>
        </service>
        <service id="app.feedback_search_statistic_provider"
                 class="App\Service\Feedback\Statistic\FeedbackSearchUserStatisticProvider" lazy="true">
            <argument type="service" id="app.feedback_search_command_options"/>
            <argument type="service" id="app.feedback_search_repository"/>
            <tag name="app.feedback_user_statistic_provider"/>
        </service>
        <service id="app.feedback_lookup_statistic_provider"
                 class="App\Service\Feedback\Statistic\FeedbackLookupUserStatisticProvider" lazy="true">
            <argument type="service" id="app.feedback_lookup_command_options"/>
            <argument type="service" id="app.feedback_lookup_repository"/>
            <tag name="app.feedback_user_statistic_provider"/>
        </service>
        <service id="app.feedback_search_term_provider" class="App\Service\Feedback\SearchTerm\SearchTermProvider"
                 lazy="true"/>
        <service id="app.feedback_search_telegram_view_provider"
                 class="App\Service\Feedback\Telegram\Bot\View\FeedbackSearchTelegramViewProvider" lazy="true">
            <argument type="service" id="app.feedback_search_term_provider"/>
            <argument type="service" id="app.feedback_search_term_telegram_view_provider"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_time_provider"/>
            <argument type="service" id="translator"/>
            <argument type="service" id="app.feedback_telegram_reply_sign_view_provider"/>
        </service>
        <service id="app.feedback_telegram_view_provider"
                 class="App\Service\Feedback\Telegram\Bot\View\FeedbackTelegramViewProvider" lazy="true">
            <argument type="service" id="app.feedback_search_term_provider"/>
            <argument type="service" id="app.feedback_multiple_search_term_telegram_view_provider"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_time_provider"/>
            <argument type="service" id="app.feedback_rating_provider"/>
            <argument type="service" id="translator"/>
            <argument type="service" id="app.feedback_telegram_reply_sign_view_provider"/>
            <argument type="service" id="app.string_mb_lc_firster"/>
        </service>
        <service id="app.feedback_search_term_telegram_view_provider"
                 class="App\Service\Feedback\Telegram\View\SearchTermTelegramViewProvider" lazy="true">
            <argument type="service" id="app.feedback_search_term_type_provider"/>
            <argument type="service" id="app.messenger_user_profile_url_provider"/>
            <argument type="service" id="app.feedback_search_term_messenger_provider"/>
            <argument type="service" id="app.string_secrets_adder"/>
        </service>
        <service id="app.feedback_multiple_search_term_telegram_view_provider"
                 class="App\Service\Feedback\Telegram\View\MultipleSearchTermTelegramViewProvider" lazy="true">
            <argument type="service" id="app.feedback_search_term_telegram_view_provider"/>
            <argument type="service" id="app.feedback_search_term_type_provider"/>
        </service>
        <service id="app.subscription_telegram_view_provider"
                 class="App\Service\Feedback\Telegram\Bot\View\SubscriptionTelegramViewProvider" lazy="true">
            <argument type="service" id="app.intl_time_provider"/>
            <argument type="service" id="app.intl_currency_provider"/>
            <argument type="service" id="app.money_formatter"/>
            <argument type="service" id="app.feedback_subscription_plan_provider"/>
            <argument type="service" id="app.feedback_subscription_manager"/>
        </service>
        <service id="app.feedback_create_command_options" class="App\Entity\FeedbackCommandOptions">
            <factory service="app.feedback_command_options_factory"/>
            <argument>%app.feedback_create_command_options%</argument>
        </service>
        <service id="app.feedback_search_command_options" class="App\Entity\FeedbackCommandOptions">
            <factory service="app.feedback_command_options_factory"/>
            <argument>%app.feedback_search_command_options%</argument>
        </service>
        <service id="app.feedback_lookup_command_options" class="App\Entity\FeedbackCommandOptions">
            <factory service="app.feedback_command_options_factory"/>
            <argument>%app.feedback_lookup_command_options%</argument>
        </service>
        <service id="app.feedback_search_term_type_provider"
                 class="App\Service\Feedback\SearchTerm\SearchTermTypeProvider" lazy="true">
            <argument type="service" id="translator"/>
        </service>
        <service id="app.feedback_rating_provider" class="App\Service\Feedback\Rating\FeedbackRatingProvider"
                 lazy="true">
            <argument type="service" id="app.translator"/>
        </service>
        <service id="app.subscriptions_telegram_chat_sender"
                 class="App\Service\Feedback\Telegram\Bot\Chat\SubscriptionsTelegramChatSender" lazy="true">
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.subscription_telegram_view_provider"/>
        </service>
        <service id="app.choose_action_telegram_chat_sender"
                 class="App\Service\Feedback\Telegram\Bot\Chat\ChooseActionTelegramChatSender" lazy="true">
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
        </service>
        <service id="app.telegram_conversation_factory_feedbacks"
                 class="App\Service\Telegram\Bot\Conversation\TelegramBotConversationFactory" lazy="true">
            <argument type="tagged_locator" tag="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.start_telegram_command_handler"
                 class="App\Service\Feedback\Telegram\Bot\Chat\StartTelegramCommandHandler" lazy="true">
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.telegram_channel_repository"/>
            <argument type="service" id="app.telegram_channel_link_view_provider"/>
        </service>
        <service id="app.telegram_group_feedbacks"
                 class="App\Service\Feedback\Telegram\Bot\FeedbackTelegramBotGroup" lazy="true">
            <argument type="service" id="app.telegram_bot_aware_helper"/>
            <argument type="service" id="app.telegram_conversation_factory_feedbacks"/>
            <argument type="service" id="app.feedback_subscription_manager"/>
            <argument type="service" id="app.subscriptions_telegram_chat_sender"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.start_telegram_command_handler"/>
            <argument type="service" id="app.subscription_telegram_view_provider"/>
            <argument type="service" id="app.intl_time_provider"/>
            <argument type="service" id="app.feedback_subscription_plan_provider"/>
            <argument type="service" id="app.feedback_create_command_options"/>
            <argument type="service" id="app.feedback_search_command_options"/>
            <argument type="service" id="app.feedback_lookup_command_options"/>
            <tag name="app.telegram_group" group="feedbacks"/>
        </service>
        <service id="app.telegram_conversation_country"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\CountryTelegramBotConversation" lazy="true">
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.telegram_bot_matches_chat_sender"/>
            <argument type="service" id="app.level_1_region_provider"/>
            <argument type="service" id="logger"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_locale"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\LocaleTelegramBotConversation" lazy="true">
            <argument type="service" id="app.intl_locale_provider"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.telegram_bot_locale_switcher"/>
            <argument type="service" id="app.telegram_bot_matches_chat_sender"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_create_feedback"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\CreateFeedbackTelegramBotConversation"
                 lazy="true">
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_search_term_parser"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.feedback_multiple_search_term_telegram_view_provider"/>
            <argument type="service" id="app.feedback_search_term_type_provider"/>
            <argument type="service" id="app.feedback_creator"/>
            <argument type="service" id="app.feedback_rating_provider"/>
            <argument type="service" id="app.event_bus"/>
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="app.feedback_telegram_view_provider"/>
            <argument type="service" id="app.telegram_channel_matches_provider"/>
            <argument type="service" id="app.telegram_channel_link_view_provider"/>
            <argument>%app.create.search_term_type_step%</argument>
            <argument>%app.create.extra_search_term_step%</argument>
            <argument>%app.create.description_step%</argument>
            <argument>%app.create.confirm_step%</argument>
            <argument>%app.create.send_to_channel_confirm_step%</argument>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_search_feedback"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\SearchFeedbackTelegramBotConversation"
                 lazy="true">
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_search_term_parser"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.feedback_search_term_telegram_view_provider"/>
            <argument type="service" id="app.feedback_search_term_type_provider"/>
            <argument type="service" id="app.feedback_search_creator"/>
            <argument type="service" id="app.feedback_searcher"/>
            <argument type="service" id="app.feedback_telegram_view_provider"/>
            <argument>%app.search.search_term_type_step%</argument>
            <argument>%app.search.confirm_step%</argument>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_lookup"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\LookupFeedbackTelegramBotConversation"
                 lazy="true">
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_search_term_parser"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.feedback_search_term_telegram_view_provider"/>
            <argument type="service" id="app.feedback_search_term_type_provider"/>
            <argument type="service" id="app.feedback_lookup_creator"/>
            <argument type="service" id="app.feedback_search_searcher"/>
            <argument type="service" id="app.feedback_search_telegram_view_provider"/>
            <argument>%app.lookup.search_term_type_step%</argument>
            <argument>%app.lookup.confirm_step%</argument>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_subscribe"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\SubscribeTelegramBotConversation" lazy="true">
            <argument type="service" id="app.validator"/>
            <argument type="service" id="app.feedback_subscription_plan_provider"/>
            <argument type="service" id="app.telegram_bot_payment_method_repository"/>
            <argument type="service" id="app.telegram_bot_payment_manager"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.intl_currency_provider"/>
            <argument type="service" id="app.money_formatter"/>
            <argument type="service" id="app.telegram_bot_repository"/>
            <argument type="service" id="app.telegram_bot_user_provider"/>
            <argument type="service" id="logger"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_purge"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\PurgeConversationTelegramBotConversation"
                 lazy="true">
            <argument type="service" id="app.user_data_purger"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.telegram_bot_locale_switcher"/>
            <argument type="service" id="app.intl_country_provider"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_contact"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\ContactTelegramBotConversation" lazy="true">
            <argument type="service" id="app.user_contact_message_creator"/>
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.contact_options_factory"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.telegram_conversation_restart"
                 class="App\Service\Feedback\Telegram\Bot\Conversation\RestartConversationTelegramBotConversation"
                 lazy="true">
            <argument type="service" id="app.choose_action_telegram_chat_sender"/>
            <argument type="service" id="app.start_telegram_command_handler"/>
            <argument type="service" id="app.intl_country_provider"/>
            <argument type="service" id="app.telegram_bot_locale_switcher"/>
            <tag name="app.telegram_conversation_feedbacks"/>
        </service>
        <service id="app.feedback_search_term_text_normalizer"
                 class="App\Service\Feedback\SearchTerm\FeedbackSearchTermTextNormalizer" lazy="true"/>
        <service id="app.feedback_search_term_upserter"
                 class="App\Service\Feedback\SearchTerm\FeedbackSearchTermUpserter" lazy="true">
            <argument type="service" id="app.feedback_search_term_repository"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.messenger_user_upserter"/>
            <argument type="service" id="app.feedback_search_term_text_normalizer"/>
        </service>
        <service id="app.feedback_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackCreatedEventHandler" lazy="true">
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler" handles="App\Message\Event\Feedback\FeedbackCreatedEvent"
                 bus="app.event_bus"/>
        </service>
        <service id="app.feedback_send_to_telegram_channel_confirm_received_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackSendToTelegramChannelConfirmReceivedEventHandler"
                 lazy="true">
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="app.telegram_channel_matches_provider"/>
            <argument type="service" id="app.telegram_bot_message_sender"/>
            <argument type="service" id="app.feedback_telegram_view_provider"/>
            <argument type="service" id="logger"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Event\Feedback\FeedbackSendToTelegramChannelConfirmReceivedEvent"
                 bus="app.event_bus"/>
        </service>
        <service id="app.feedback_lookup_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackLookupCreatedEventHandler" lazy="true">
            <argument type="service" id="app.feedback_lookup_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler" handles="App\Message\Event\Feedback\FeedbackLookupCreatedEvent"
                 bus="app.event_bus"/>
        </service>
        <service id="app.feedback_search_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackSearchCreatedEventHandler" lazy="true">
            <argument type="service" id="app.feedback_search_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler" handles="App\Message\Event\Feedback\FeedbackSearchCreatedEvent"
                 bus="app.event_bus"/>
        </service>
        <service id="app.feedback_user_subscription_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackUserSubscriptionCreatedEventHandler" lazy="true">
            <argument type="service" id="app.feedback_user_subscription_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Event\Feedback\FeedbackUserSubscriptionCreatedEvent" bus="app.event_bus"/>
        </service>
        <service id="app.feedback_search_term_messenger_provider"
                 class="App\Service\Feedback\SearchTerm\SearchTermMessengerProvider" lazy="true"/>
        <service id="app.feedbacks_publish_unpublished_command"
                 class="App\Command\Feedback\Telegram\FeedbacksPublishUnpublishedCommand" lazy="true">
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="app.event_bus"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <tag name="console.command" command="feedbacks:telegram:publish-unpublished"/>
        </service>
        <service id="app.notify_feedback_search_term_users_command_handler"
                 class="App\Message\CommandHandler\Feedback\NotifyFeedbackSearchTermUsersCommandHandler" lazy="true">
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.feedback_search_term_users_notifier"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Command\Feedback\NotifyFeedbackSearchTermUsersCommand" bus="app.command_bus"/>
        </service>
        <service id="app.feedback_search_term_users_notifier_registry"
                 class="App\Service\Feedback\Notify\FeedbackSearchTermUsersNotifierRegistry" lazy="true">
            <argument type="tagged_locator" tag="app.feedback_search_term_users_notifier"/>
        </service>
        <service id="app.feedback_search_term_users_notifier"
                 class="App\Service\Feedback\Notify\FeedbackSearchTermUsersNotifier" lazy="true">
            <argument type="service" id="app.feedback_search_term_users_notifier_registry"/>
        </service>
        <service id="app.feedback_search_term_users_telegram_notifier"
                 class="App\Service\Feedback\Notify\FeedbackSearchTermUsersTelegramNotifier" lazy="true">
            <argument type="service" id="app.feedback_search_term_messenger_provider"/>
            <argument type="service" id="app.messenger_user_repository"/>
            <argument type="service" id="app.telegram_bot_repository"/>
            <argument type="service" id="translator"/>
            <argument type="service" id="app.feedback_telegram_view_provider"/>
            <argument type="service" id="app.telegram_bot_message_sender"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.event_bus"/>
            <tag name="app.feedback_search_term_users_notifier"/>
        </service>
        <service id="app.feedback_search_term_user_telegram_notification_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackSearchTermUserTelegramNotificationCreatedEventHandler"
                 lazy="true">
            <argument type="service" id="app.feedback_search_term_user_telegram_notification_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Event\Feedback\FeedbackSearchTermUserTelegramNotificationCreatedEvent"
                 bus="app.event_bus"/>
        </service>
        <service id="app.notify_feedback_search_users_command_handler"
                 class="App\Message\CommandHandler\Feedback\NotifyFeedbackSearchUsersCommandHandler" lazy="true">
            <argument type="service" id="app.feedback_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.feedback_search_users_notifier"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Command\Feedback\NotifyFeedbackSearchUsersCommand" bus="app.command_bus"/>
        </service>
        <service id="app.feedback_search_users_notifier_registry"
                 class="App\Service\Feedback\Notify\FeedbackSearchUsersNotifierRegistry" lazy="true">
            <argument type="tagged_locator" tag="app.feedback_search_users_notifier"/>
        </service>
        <service id="app.feedback_search_users_notifier"
                 class="App\Service\Feedback\Notify\FeedbackSearchUsersNotifier" lazy="true">
            <argument type="service" id="app.feedback_search_users_notifier_registry"/>
        </service>
        <service id="app.feedback_search_users_telegram_notifier"
                 class="App\Service\Feedback\Notify\FeedbackSearchUsersTelegramNotifier" lazy="true">
            <argument type="service" id="app.feedback_search_searcher"/>
            <argument type="service" id="app.telegram_bot_repository"/>
            <argument type="service" id="translator"/>
            <argument type="service" id="app.feedback_telegram_view_provider"/>
            <argument type="service" id="app.telegram_bot_message_sender"/>
            <argument type="service" id="app.id_generator"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument type="service" id="app.event_bus"/>
            <tag name="app.feedback_search_users_notifier"/>
        </service>
        <service id="app.feedback_search_user_telegram_notification_created_event_handler"
                 class="App\Message\EventHandler\Feedback\FeedbackSearchUserTelegramNotificationCreatedEventHandler"
                 lazy="true">
            <argument type="service" id="app.feedback_search_user_telegram_notification_repository"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="app.command_bus"/>
            <tag name="messenger.message_handler"
                 handles="App\Message\Event\Feedback\FeedbackSearchUserTelegramNotificationCreatedEvent"
                 bus="app.event_bus"/>
        </service>
    </services>
</container>